/* auto-generated imports */
<% allTables.forEach(({ fileName, modelName }) => { -%>
import { <%= modelName %> } from './<%= fileName %>';
<% }) -%>
/* auto-generated imports */
import { Sequelize } from 'sequelize';

export default function initModels(sequelize: Sequelize) {
/* auto-generated inits */
<% allTables.forEach(({ modelName }) => { -%>
<%= modelName %>.initModel(sequelize);
<% }) -%>
<% joinTableAliases.forEach(([orig, sing]) => { -%>
(class <%- sing %> extends <%- orig %> {}).initModel(sequelize);
<% }) -%>
/* auto-generated inits */

/* auto-generated associations */
<% allTables.forEach(table => { -%>
<% [...table.relations.entries()].forEach(([name, relation]) => { -%>
<%- table.modelName %>.<%- relation.type %>(<%- relation.targetName %>, {
as: "<%- name %>",
foreignKey: "<%- relation.foreignKey %>",
<% if (relation.type === 'belongsToMany') { -%>
through: "<%- relation.throughAlias %>",
otherKey: "<%- relation.otherKey %>",
<% } -%>
});
<% }) -%>
<% }) -%>
/* auto-generated associations */
}

/* auto-generated exports */
<% allTables.forEach(({ fileName }) => { -%>
export * from './<%= fileName %>';
<% }) -%>
/* auto-generated exports */